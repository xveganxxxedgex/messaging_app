webpackJsonp([1],{158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(193),s=function(e){return e&&e.__esModule?e:{default:e}}(r),a=new s.default({user:{loading:!1,data:{name:"Authenticated User",id:10},error:null},contacts:{loading:!1,data:null,error:null},messages:{loading:!1,data:null,error:null}}),o=a;t.default=o;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(a,"state","/Users/maureenfortin/messaging_app/src/state.js"),__REACT_HOT_LOADER__.register(o,"default","/Users/maureenfortin/messaging_app/src/state.js"))}()},243:function(e,t,n){"use strict";function r(){for(var e=u.default.select("contacts"),t=[],n=["Leon Kennedy","Marcus Fenix","Isaac Clarke","Chris Redfield","Cloud Strife","Squall Leonhart"],r=0;r<n.length;r++)t.push({name:n[r],id:r,total:c[r].length});e.merge({data:t})}function s(e){for(var t=u.default.select("messages"),n=[],r=0;r<c[e].length;r++)n.push({text:c[e][r],id:r,date:new Date(2017,9,13,14,10+r),sender_user:e});t.merge({data:n})}function a(e,t){var n=u.default.select(["messages","data"]),r=u.default.get(["user","data"]);n.push({text:t,id:n.get().length,date:new Date,sender_user:r.id})}Object.defineProperty(t,"__esModule",{value:!0}),t.getContacts=r,t.getMessages=s,t.sendMessage=a;var o=n(465),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(o),n(486),n(158)),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=[["When are you coming home?","Are we getting ice cream tonight?","Ice cream and scary movies?","Okay fine, video games instead","Scary video games? :D","Definitey ice cream either way though"],["Sorry, I couldn't go to the meeting the other day, let's try to reschedule"],["Have you heard from Nicole?","I can't seem to get her to answer her phone"],[],["Hey do you remember me?","Do you still talk to Tifa?","There's... Something you should know about Aeris..."],["...","...Whatever"]];!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"messageBodies","/Users/maureenfortin/messaging_app/src/actions/index.js"),__REACT_HOT_LOADER__.register(r,"getContacts","/Users/maureenfortin/messaging_app/src/actions/index.js"),__REACT_HOT_LOADER__.register(s,"getMessages","/Users/maureenfortin/messaging_app/src/actions/index.js"),__REACT_HOT_LOADER__.register(a,"sendMessage","/Users/maureenfortin/messaging_app/src/actions/index.js"))}()},287:function(e,t,n){e.exports=n(288)},288:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(25),f=r(l),_=n(123),d=n(185),p=r(d),g=n(320),m=r(g);n(503);var h=(0,p.default)(),y=function(e){function t(){return s(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return c.default.createElement(_.Router,{history:h},c.default.createElement(_.Route,{component:m.default}))}}]),t}(c.default.Component);f.default.render(c.default.createElement(y,null),document.getElementById("root"));!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(h,"history","/Users/maureenfortin/messaging_app/src/index.js"),__REACT_HOT_LOADER__.register(y,"Root","/Users/maureenfortin/messaging_app/src/index.js"))}()},320:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,u,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=r(l),_=n(123),d=n(130),p=n(324),g=r(p),m=n(488),h=r(m),y=n(500),b=r(y);n(502);var v=n(158),O=r(v),E=(i=(0,d.root)(O.default))(u=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleIsMobile=n.toggleIsMobile.bind(n),n.adaptToMobile=n.adaptToMobile.bind(n),n.mobileMaxWidth=768,n.state={},n}return o(t,e),c(t,[{key:"componentDidMount",value:function(){this.adaptToMobile(),window.addEventListener("resize",this.adaptToMobile)}},{key:"toggleIsMobile",value:function(){this.setState({isMobile:!this.state.isMobile})}},{key:"adaptToMobile",value:function(){window.innerWidth<this.mobileMaxWidth?this.state.isMobile||this.toggleIsMobile():this.state.isMobile&&this.toggleIsMobile()}},{key:"render",value:function(){var e=this.props.location.pathname,t=this.state.isMobile,n=!t||"/"==e,r=!t||"/"!=e;return f.default.createElement("div",{className:"app flex flex-grow"},n&&f.default.createElement(_.Route,{path:"/",component:g.default}),r&&f.default.createElement(_.Switch,null,f.default.createElement(_.Route,{path:"/chats/:contactId([0-9]+)",component:h.default}),f.default.createElement(_.Route,{exact:!0,path:"/",component:b.default}),f.default.createElement(_.Redirect,{to:"/"})))}}]),t}(l.Component))||u;t.default=E;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(E,"App","/Users/maureenfortin/messaging_app/src/components/App.js")}()},324:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(c),f=n(130),_=n(325),d=n(198),p=n(243);n(487);var g=(o=(0,f.branch)({contacts:["contacts","data"]}))(i=function(e){function t(){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"componentWillMount",value:function(){(0,p.getContacts)()}},{key:"render",value:function(){var e=this.props,t=e.contacts,n=e.match.params.contactId,r=void 0;return r=t&&t.length?t.map(function(e){return l.default.createElement(m,{contact:e,key:e.id,activeChat:n})}):l.default.createElement("div",{className:"no-contacts flex-grow"},"No contacts"),l.default.createElement("div",{className:"contacts flex flex-column"},l.default.createElement("div",{className:"h4 contacts-header"},"Contacts"),l.default.createElement("div",{className:"contacts-list"},r))}}]),t}(c.Component))||i;t.default=g;var m=function(e){function t(){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.contact,n=e.activeChat;return l.default.createElement(_.LinkContainer,{to:{pathname:"/chats/"+t.id},className:"contact"},l.default.createElement(d.Button,{bsSize:"lg",block:!0,bsStyle:n==t.id?"primary":"default"},l.default.createElement("div",{className:"contact-name"},t.name),l.default.createElement("div",{className:"contact-messages"},"(",t.total,")")))}}]),t}(c.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(g,"Contacts","/Users/maureenfortin/messaging_app/src/components/Contacts.js"),__REACT_HOT_LOADER__.register(m,"Contact","/Users/maureenfortin/messaging_app/src/components/Contacts.js"))}()},465:function(e,t,n){"use strict";function r(e){return!e.status||e.status<200||e.status>204}function s(e){if(r(e)){var t=e.statusText;throw new Error(t)}}function a(){return c.default.get(l+"/contacts")}function o(e){return c.default.get(l+"/messages",{params:{id:e}})}function i(e){return c.default.post(l+"/message-send",{params:{id:e}})}Object.defineProperty(t,"__esModule",{value:!0}),t.isUnsuccessfulRequest=r,t.handleUnsuccessfulRequest=s,t.getContacts=a,t.getMessages=o,t.sendMessage=i;var u=n(466),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l="http://localhost:8081/api";!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(l,"API_ROOT","/Users/maureenfortin/messaging_app/src/actions/api.js"),__REACT_HOT_LOADER__.register(r,"isUnsuccessfulRequest","/Users/maureenfortin/messaging_app/src/actions/api.js"),__REACT_HOT_LOADER__.register(s,"handleUnsuccessfulRequest","/Users/maureenfortin/messaging_app/src/actions/api.js"),__REACT_HOT_LOADER__.register(a,"getContacts","/Users/maureenfortin/messaging_app/src/actions/api.js"),__REACT_HOT_LOADER__.register(o,"getMessages","/Users/maureenfortin/messaging_app/src/actions/api.js"),__REACT_HOT_LOADER__.register(i,"sendMessage","/Users/maureenfortin/messaging_app/src/actions/api.js"))}()},486:function(e,t,n){"use strict";function r(e,t,n,r){var s=!1,a=r||{loading:!1,data:t,error:null};return n?(e.set(a),s=!0):e.get()&&(e.merge(a),s=!0),s&&o.default.commit(),s}function s(e,t,n,r){console.error(t),e.get()&&(e.merge({loading:!1,data:r,error:n||t.message}),o.default.commit())}Object.defineProperty(t,"__esModule",{value:!0}),t.setCursorData=r,t.setCursorError=s;var a=n(158),o=function(e){return e&&e.__esModule?e:{default:e}}(a);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"setCursorData","/Users/maureenfortin/messaging_app/src/actions/utility.js"),__REACT_HOT_LOADER__.register(s,"setCursorError","/Users/maureenfortin/messaging_app/src/actions/utility.js"))}()},487:function(e,t){},488:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,u,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=r(l),_=n(130),d=n(198),p=n(489),g=r(p),m=n(252),h=r(m),y=n(243);n(499);var b=(i=(0,_.branch)({messages:["messages","data"],user:["user","data"]}))(u=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateNewMessage=n.updateNewMessage.bind(n),n.sendMessage=n.sendMessage.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleKeyUp=n.handleKeyUp.bind(n),n.scrollToLastMessage=(0,g.default)(n.scrollToLastMessage.bind(n),100),n.state={},n}return o(t,e),c(t,[{key:"componentWillMount",value:function(){var e=this.props.match.params.contactId;void 0!=e&&(0,y.getMessages)(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.contactId;t!=this.props.match.params.contactId&&(0,y.getMessages)(t)}},{key:"componentDidUpdate",value:function(e){this.props.messages!=e.messages&&this.scrollToLastMessage()}},{key:"scrollToLastMessage",value:function(){if(this.messageHistory){var e=this.messageHistory.scrollHeight,t=this.messageHistory.clientHeight,n=e-t;this.messageHistory.scrollTop=n>0?n:0}}},{key:"updateNewMessage",value:function(e){this.setState({newMessage:e.target.value})}},{key:"handleKeyPress",value:function(e){"Enter"==e.key&&(this.state.shiftPressed||(e.preventDefault(),this.sendMessage()))}},{key:"handleKeyDown",value:function(e){"Shift"==e.key&&this.setState({shiftPressed:!0})}},{key:"handleKeyUp",value:function(e){"Shift"==e.key&&this.setState({shiftPressed:!1})}},{key:"sendMessage",value:function(){var e=this.props.match.params.contactId;this.state.newMessage&&this.state.newMessage.trim()&&((0,y.sendMessage)(e,this.state.newMessage),this.setState({newMessage:""}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.messages,r=t.user,s=void 0;return s=n&&n.length?n.map(function(e,t){var n=e.sender_user==r.id?"outgoing":"incoming";return f.default.createElement(v,{message:e,key:t,messageType:n})}):f.default.createElement("div",{className:"no-messages flex flex-grow"},"No chat history"),f.default.createElement("div",{className:"messages flex flex-grow flex-column"},f.default.createElement("div",{className:"history flex flex-grow flex-column",ref:function(t){e.messageHistory=t}},s),f.default.createElement(d.Form,{className:"send-message flex flex-row"},f.default.createElement(d.FormGroup,{className:"flex flex-grow"},f.default.createElement(d.FormControl,{componentClass:"textarea",className:"flex flex-grow",placeholder:"Send a message...",onChange:this.updateNewMessage,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,value:this.state.newMessage})),f.default.createElement(d.Button,{bsSize:"sm",onClick:this.sendMessage},"Send")))}}]),t}(l.Component))||u;t.default=b;var v=function(e){function t(){return s(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.messageType;return f.default.createElement(d.Well,{className:"message "+n},f.default.createElement("div",{className:"message-body"},t.text),f.default.createElement("div",{className:"message-sent text-muted"},f.default.createElement("small",null,"Sent: ",(0,h.default)(t.date).format("MM/DD h:mm a"))))}}]),t}(l.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"Chat","/Users/maureenfortin/messaging_app/src/components/Messages.js"),__REACT_HOT_LOADER__.register(v,"Message","/Users/maureenfortin/messaging_app/src/components/Messages.js"))}()},499:function(e,t){},500:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(252),f=r(l);n(501);var _=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getGreeting=n.getGreeting.bind(n),n.format="hh:mm:ss a",n.morningStart="05:00:00 am",n.afternoonStart="12:00:00 pm",n.eveningStart="05:00:00 pm",n.greetings=[{time:n.morningStart,greeting:"Morning"},{time:n.afternoonStart,greeting:"Afternoon"},{time:n.eveningStart,greeting:"Evening"}],n}return o(t,e),i(t,[{key:"getGreeting",value:function(){for(var e=(0,f.default)().date(1),t=0;t<this.greetings.length;t++){var n=(0,f.default)(this.greetings[t].time,this.format).date(1),r=t==this.greetings.length-1?0:t+1,s=r?1:2,a=(0,f.default)(this.greetings[r].time,this.format).date(s);if(e.isBetween(n,a))return this.greetings[t].greeting}}},{key:"render",value:function(){var e=this.getGreeting();return c.default.createElement("div",{className:"greeting h3 text-muted flex flex-grow flex-column"},"Good ",e,"!")}}]),t}(u.Component);t.default=_;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(_,"Greeting","/Users/maureenfortin/messaging_app/src/components/Greeting.js")}()},501:function(e,t){},502:function(e,t){}},[287]);